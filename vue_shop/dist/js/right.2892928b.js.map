{"version":3,"file":"js/right.2892928b.js","mappings":"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","sources":["webpack://vue_shop/./src/pages/right/Rights.vue","webpack://vue_shop/src/pages/right/Rights.vue","webpack://vue_shop/./src/pages/right/Rights.vue?1f5c","webpack://vue_shop/./src/pages/right/Rights.vue?c5ef","webpack://vue_shop/./src/pages/right/Roles.vue","webpack://vue_shop/src/pages/right/Roles.vue","webpack://vue_shop/./src/pages/right/Roles.vue?ce26","webpack://vue_shop/./src/pages/right/Roles.vue?a615"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"权限列表\")])],1),_c('el-card',[_c('el-table',{attrs:{\"data\":_vm.rightList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"label\":\"权限名称\",\"prop\":\"authName\"}}),_c('el-table-column',{attrs:{\"label\":\"路径\",\"prop\":\"path\"}}),_c('el-table-column',{attrs:{\"label\":\"权限等级\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.level === '0')?_c('el-tag',[_vm._v(\"一级\")]):(scope.row.level === '1')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"二级\")]):(scope.row.level === '2')?_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"三级\")]):_vm._e()]}}])})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <el-table :data=\"rightList\" border stripe>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column label=\"权限名称\" prop=\"authName\"></el-table-column>\r\n        <el-table-column label=\"路径\" prop=\"path\"></el-table-column>\r\n        <el-table-column label=\"权限等级\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"scope.row.level === '0'\">一级</el-tag>\r\n            <el-tag v-else-if=\"scope.row.level === '1'\" type=\"success\">二级</el-tag>\r\n            <el-tag v-else-if=\"scope.row.level === '2'\" type=\"warning\">三级</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Rights',\r\n  data(){\r\n    return {\r\n      // 权限列表\r\n      rightList: []\r\n    }\r\n  },\r\n  methods:{\r\n    // 获取权限列表\r\n    async getRightList(){\r\n      const { data: res } = await this.$http.get('rights/list')\r\n      if(res.meta.status !== 200) return this.$message.error('获取权限列表失败')\r\n      this.rightList = res.data\r\n    }\r\n  },\r\n  created() {\r\n    this.getRightList()\r\n  },\r\n  // 解决bug：用户直接在浏览器上输入路径或者直接点击浏览器的回退和前进按钮，但是左侧二级菜单激活选中状态不变\r\n  beforeRouteEnter(to, from, next){\r\n    next(vc => {\r\n      sessionStorage.setItem('activePath', 'rights')\r\n      vc.$store.dispatch('saveNavStatus', 'rights')\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .el-breadcrumb {\r\n    margin-bottom: 15px;\r\n    font-size: 12px;\r\n  }\r\n  .el-table {\r\n    font-size: 12px;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Rights.vue?vue&type=template&id=3194c71c&scoped=true&\"\nimport script from \"./Rights.vue?vue&type=script&lang=js&\"\nexport * from \"./Rights.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Rights.vue?vue&type=style&index=0&id=3194c71c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3194c71c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addRoleDialogVisible = true}}},[_vm._v(\"添加角色\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.roleList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,index1){return _c('el-row',{key:item1.id,class:['bdbottom', index1 === 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item1.id)}}},[_vm._v(_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,index2){return _c('el-row',{key:item2.id,class:[index2 === 0 ? '' : 'bdtop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"label\":\"#\",\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}}),_c('el-table-column',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"285px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditRoleDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRightDialog(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightDialogVisible},on:{\"update:visible\":function($event){_vm.setRightDialogVisible=$event},\"close\":_vm.setRightDialogClosed}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightList,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRights}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.addRoleDialogVisible},on:{\"update:visible\":function($event){_vm.addRoleDialogVisible=$event},\"close\":_vm.addRoleDialogClosed}},[_c('el-form',{ref:\"addRoleFormRef\",attrs:{\"status-icon\":\"\",\"model\":_vm.addRoleForm,\"rules\":_vm.addRoleFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleName),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleName\", $$v)},expression:\"addRoleForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleDesc\", $$v)},expression:\"addRoleForm.roleDesc\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改角色\",\"visible\":_vm.editRoleDialogVisible},on:{\"update:visible\":function($event){_vm.editRoleDialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.editRoleForm,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择角色名称\"},model:{value:(_vm.editRoleForm.roleName),callback:function ($$v) {_vm.$set(_vm.editRoleForm, \"roleName\", $$v)},expression:\"editRoleForm.roleName\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.roleName}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.editRoleForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.editRoleForm, \"roleDesc\", $$v)},expression:\"editRoleForm.roleDesc\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editRole}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 添加角色按钮区域 -->\r\n      <el-row>\r\n        <el-col>\r\n          <el-button type=\"primary\" @click=\"addRoleDialogVisible = true\">添加角色</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 角色列表区域 -->\r\n      <el-table :data=\"roleList\" border stripe>\r\n        <!-- 展开列 -->\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row\r\n                v-for=\"(item1, index1) in scope.row.children\"\r\n                :key=\"item1.id\"\r\n                :class=\"['bdbottom', index1 === 0 ? 'bdtop' : '', 'vcenter']\">\r\n              <!-- 渲染一级权限 -->\r\n              <el-col :span=\"5\">\r\n                <el-tag closable @close=\"removeRightById(scope.row, item1.id)\">{{item1.authName}}</el-tag>\r\n                <i class=\"el-icon-caret-right\"></i>\r\n              </el-col>\r\n              <!-- 渲染二级和三级权限 -->\r\n              <el-col :span=\"19\">\r\n                <el-row\r\n                    v-for=\"(item2, index2) in item1.children\"\r\n                    :key=\"item2.id\"\r\n                    :class=\"[index2 === 0 ? '' : 'bdtop', 'vcenter']\">\r\n                  <!-- 二级权限 -->\r\n                  <el-col :span=\"6\">\r\n                    <el-tag\r\n                        type=\"success\"\r\n                        closable\r\n                        @close=\"removeRightById(scope.row, item2.id)\">{{item2.authName}}</el-tag>\r\n                    <i class=\"el-icon-caret-right\"></i>\r\n                  </el-col>\r\n                  <!-- 三级权限 -->\r\n                  <el-col :span=\"18\">\r\n                    <el-tag\r\n                        type=\"warning\"\r\n                        v-for=\"item3 in item2.children\"\r\n                        :key=\"item3.id\"\r\n                        closable\r\n                        @close=\"removeRightById(scope.row, item3.id)\">{{item3.authName}}</el-tag>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 索引列 -->\r\n        <el-table-column label=\"#\" type=\"index\"></el-table-column>\r\n        <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n        <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"285px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditRoleDialog(scope.row)\">编辑</el-button>\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteRole(scope.row.id)\">删除</el-button>\r\n            <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                size=\"mini\"\r\n                @click=\"showSetRightDialog(scope.row)\">分配权限</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <!-- 分配权限的对话框 -->\r\n    <el-dialog title=\"分配权限\" :visible.sync=\"setRightDialogVisible\" @close=\"setRightDialogClosed\">\r\n      <el-tree\r\n          :data=\"rightList\"\r\n          :props=\"treeProps\"\r\n          show-checkbox\r\n          node-key=\"id\"\r\n          ref=\"treeRef\"\r\n          default-expand-all\r\n          :default-checked-keys=\"defKeys\"></el-tree>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 添加角色的对话框 -->\r\n    <el-dialog title=\"添加角色\" :visible.sync=\"addRoleDialogVisible\" @close=\"addRoleDialogClosed\">\r\n      <el-form status-icon ref=\"addRoleFormRef\" :model=\"addRoleForm\" :rules=\"addRoleFormRules\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"addRoleForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\">\r\n          <el-input v-model=\"addRoleForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"addRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改角色的对话框 -->\r\n    <el-dialog title=\"修改角色\" :visible.sync=\"editRoleDialogVisible\">\r\n      <el-form :model=\"editRoleForm\" label-width=\"70px\">\r\n        <el-form-item label=\"角色名称\">\r\n          <el-select v-model=\"editRoleForm.roleName\" placeholder=\"请选择角色名称\">\r\n            <el-option\r\n                v-for=\"item in roleList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.roleName\"\r\n                :value=\"item.roleName\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\">\r\n          <el-input v-model=\"editRoleForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"editRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Roles',\r\n  data(){\r\n    return {\r\n      // 所有角色列表数据\r\n      roleList: [],\r\n      // 控制分配权限对话框的显示与隐藏\r\n      setRightDialogVisible: false,\r\n      // 控制添加角色对话框的显示与隐藏\r\n      addRoleDialogVisible: false,\r\n      // 控制修改角色对话框的显示与隐藏\r\n      editRoleDialogVisible: false,\r\n      // 所有权限数据\r\n      rightList: [],\r\n      // 树形控件的属性绑定对象\r\n      treeProps: {\r\n        children: 'children',\r\n        label: 'authName'\r\n      },\r\n      // 默认选中节点的 id 值的数组\r\n      defKeys: [],\r\n      // 打开分配权限对话框时当前角色对应的 id 值\r\n      roleId: 0,\r\n      // 添加角色表单的数据对象\r\n      addRoleForm: {\r\n        roleName: '',\r\n        roleDesc: ''\r\n      },\r\n      // 修改角色表单的数据对象\r\n      editRoleForm: {\r\n        roleName: '',\r\n        roleDesc: ''\r\n      },\r\n      // 添加角色表单的验证规则对象\r\n      addRoleFormRules: {\r\n        roleName: [\r\n          { trigger: 'blur', required: true, message: '请输入角色名称' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取所有角色列表数据\r\n    async getRoleList(){\r\n      const { data: res } = await this.$http.get('roles')\r\n      if(res.meta.status !== 200) return this.$message.error('获取角色列表失败')\r\n      this.roleList = res.data\r\n    },\r\n    // 根据 id 删除对应的权限\r\n    async removeRightById(role, rightId){\r\n      const confirmResult = await this.$confirm('此操作将永久删除该权限, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      if(confirmResult === 'cancel') {\r\n        return this.$message.info('已取消删除')\r\n      }else if(confirmResult === 'confirm') {\r\n        const { data: res } = await this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n        if(res.meta.status !== 200) return this.$message.error('删除权限失败')\r\n        role.children = res.data\r\n      }\r\n    },\r\n    // 展示分配权限的对话框\r\n    async showSetRightDialog(role){\r\n      // 将当前角色的 id 保存到 data 中\r\n      this.roleId = role.id\r\n      // 获取所有权限数据\r\n      const { data: res } = await this.$http.get('rights/tree')\r\n      if(res.meta.status !== 200) return this.$message.error('获取权限失败')\r\n      this.rightList = res.data\r\n      // 获取当前角色的所有三级权限的 id 值\r\n      this.getLeafKeys(role)\r\n      this.setRightDialogVisible = true\r\n    },\r\n    // 递归函数，用来获取某一角色下的所有最后一级权限（这里是三级权限）对应的 id，并保存到 defKeys 数组中\r\n    getLeafKeys(roleObj){\r\n      if(!roleObj.children) {\r\n        this.defKeys.push(roleObj.id)\r\n        return\r\n      }\r\n      roleObj.children.forEach(v => {\r\n        this.getLeafKeys(v)\r\n      })\r\n    },\r\n    // 监听设置权限对话框的关闭\r\n    setRightDialogClosed(){\r\n      this.defKeys = []\r\n    },\r\n    // 监听添加角色对话框的关闭\r\n    addRoleDialogClosed(){\r\n      // 对添加用户表单进行重置并移除所有校验结果\r\n      this.$refs.addRoleFormRef.resetFields()\r\n      this.addRoleForm.roleDesc = ''\r\n    },\r\n    // 点击分配权限对话框的确定按钮触发的事件\r\n    async allotRights(){\r\n      const keys = [\r\n        ...this.$refs.treeRef.getCheckedKeys(),\r\n        ...this.$refs.treeRef.getHalfCheckedKeys()\r\n      ]\r\n      const idStr = keys.join(',')\r\n      const { data: res } = await this.$http.post(`roles/${this.roleId}/rights`, { rids: idStr })\r\n      if(res.meta.status !== 200) return this.$message.error('分配权限失败')\r\n      this.$message.success('分配权限成功')\r\n      this.getRoleList()\r\n      this.setRightDialogVisible = false\r\n    },\r\n    // 点击添加角色对话框的确认按钮触发的事件\r\n    addRole(){\r\n      // 表单预验证\r\n      this.$refs.addRoleFormRef.validate(async valid => {\r\n        if(!valid) return\r\n        // 验证通过，发起网络请求添加角色\r\n        const { data: res } = await this.$http.post('roles',this.addRoleForm)\r\n        if(res.meta.status !== 201) return this.$message.error('添加角色失败')\r\n        this.$message.success('添加角色成功')\r\n        this.addRoleDialogVisible = false\r\n        this.getRoleList()\r\n      })\r\n    },\r\n    // 展示修改角色对话框\r\n    showEditRoleDialog(role){\r\n      this.roleId = role.id\r\n      this.editRoleForm.roleName = role.roleName\r\n      this.editRoleForm.roleDesc = role.roleDesc\r\n      this.editRoleDialogVisible = true\r\n    },\r\n    // 点击修改角色对话框的确认按钮触发的事件\r\n    async editRole(){\r\n      const { data: res } = await this.$http.put('roles/' + this.roleId, this.editRoleForm)\r\n      if(res.meta.status !== 200) return this.$message.error('修改角色失败')\r\n      this.$message.success('修改角色成功')\r\n      this.getRoleList()\r\n      this.editRoleDialogVisible = false\r\n    },\r\n    // 点击每一个 tableItem 的删除按钮就会触发的事件\r\n    async deleteRole(id){\r\n      const confirmResult = await this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      if(confirmResult === 'cancel') return this.$message.info('已取消删除')\r\n      else if(confirmResult === 'confirm'){\r\n        const { data: res } = await this.$http.delete('roles/' + id)\r\n        if(res.meta.status !== 200) return this.$message.error('删除角色失败')\r\n        this.$message.success('删除角色成功')\r\n        this.getRoleList()\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getRoleList()\r\n  },\r\n  // 解决bug：用户直接在浏览器上输入路径或者直接点击浏览器的回退和前进按钮，但是左侧二级菜单激活选中状态不变\r\n  beforeRouteEnter(to, from, next){\r\n    next(vc => {\r\n      sessionStorage.setItem('activePath', 'roles')\r\n      vc.$store.dispatch('saveNavStatus', 'roles')\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .el-breadcrumb {\r\n    margin-bottom: 15px;\r\n    font-size: 12px;\r\n  }\r\n  .el-table {\r\n    margin-top: 15px;\r\n    font-size: 12px;\r\n    .bdtop {\r\n      border-top: 1px solid #eeeeee;\r\n    }\r\n    .bdbottom {\r\n      border-bottom: 1px solid #eeeeee;\r\n    }\r\n    .el-row {\r\n      margin: 0 50px;\r\n      .el-tag {\r\n        margin: 7px;\r\n      }\r\n    }\r\n  }\r\n  .vcenter {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .el-select {\r\n    width: 100%;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=080523ce&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=080523ce&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"080523ce\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","rightList","scopedSlots","_u","key","fn","scope","row","level","_e","staticRenderFns","name","data","methods","created","beforeRouteEnter","next","sessionStorage","vc","component","on","$event","addRoleDialogVisible","roleList","_l","children","item1","index1","id","class","removeRightById","_s","authName","staticClass","item2","index2","item3","showEditRoleDialog","deleteRole","showSetRightDialog","setRightDialogVisible","setRightDialogClosed","ref","treeProps","defKeys","slot","allotRights","addRoleDialogClosed","addRoleForm","addRoleFormRules","model","value","roleName","callback","$$v","$set","expression","roleDesc","addRole","editRoleDialogVisible","editRoleForm","item","editRole","label","roleId","trigger","required","message","confirmButtonText","cancelButtonText","type","catch","err","role","getLeafKeys","roleObj","rids"],"sourceRoot":""}